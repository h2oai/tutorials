
<!doctype html>

<html>
<head>
  <meta name="viewport" content="width=device-width, minimum-scale=1.0, initial-scale=1.0, user-scalable=yes">
  <meta name="theme-color" content="#4F7DC9">
  <meta charset="UTF-8">
  <title>Get Started with Open Source Custom Recipes Tutorial</title>
  <link rel="stylesheet" href="//fonts.googleapis.com/css?family=Source+Code+Pro:400|Roboto:400,300,400italic,500,700|Roboto+Mono">
  <link rel="stylesheet" href="//fonts.googleapis.com/icon?family=Material+Icons">
  <link rel="stylesheet" href="../assets/codelab-elements/codelab-elements.css">
  <style>
    .success {
      color: #1e8e3e;
    }
    .error {
      color: red;
    }
  </style>
</head>
<body>
  <google-codelab-analytics gaid="UA-49880327-14"></google-codelab-analytics>
  <google-codelab title="Get Started with Open Source Custom Recipes Tutorial"
                  environment="web"
                  feedback-link="">
    
      <google-codelab-step label="Objective" duration="0">
        <p>We believe that every company can and should be an AI company. This is a fundamental concept for the future of every business and organization today. As you embark on this AI journey to make your own AI, we want you to explore the key considerations as well as the technology that will make your own AI a possibility.</p>
<p>To make your own AI, with an automatic machine learning platform, it needs to be open and extensible. This allows data scientists to influence the automatic machine learning optimization process and for it to consider additional feature engineering, custom scorers, and other algorithms. Data scientists can add their insights, customizations, and build the most accurate models for their use cases. Driverless AI uses the concept of recipes to optimize the machine learning process, and with Driverless AI 1.7.0 and newer versions, users can add custom recipes and develop new recipes.</p>
<p>In this tutorial, we will cover what a recipe is, the different types of recipes available, and how to upload existing recipes to Driverless AI through the URL option. The three types of custom recipes that will be covered are transformer, scorer, and model.</p>


      </google-codelab-step>
    
      <google-codelab-step label="Prerequisites" duration="0">
        <p>You will need the following to be able to do this tutorial:</p>
<ul>
<li>Basic knowledge of Machine Learning and Statistics</li>
<li>A Driverless AI environment</li>
<li>Basic knowledge of Driverless AI or doing the Automatic Machine Learning Intro tutorial</li>
</ul>
<p>You can get more information about getting a Driverless AI environment or trial from the following:</p>
<ul>
<li><a href="https://h2oai.github.io/tutorials/getting-started-with-driverless-ai-test-drive/#1" target="_blank">A Two Hour Test Drive Session</a></li>
<li><a href="https://www.h2o.ai/try-driverless-ai/" target="_blank">H2O Driverless AI License Key</a></li>
<li><a href="https://h2oai.github.io/tutorials/automatic-ml-intro-test-drive-tutorial/#2" target="_blank">H2O Driverless AI Environment and Product Tour</a></li>
</ul>
<p>If you are not familiar with Driverless AI, please review and do this tutorial:</p>
<ul>
<li><a href="https://h2oai.github.io/tutorials/automatic-ml-intro-test-drive-tutorial/#0" target="_blank">Automatic Machine Learning Intro Tutorial</a><br></li>
</ul>


      </google-codelab-step>
    
      <google-codelab-step label="Task 1: Introduction to Driverless AI Bring Your Own Recipe" duration="0">
        <p>H2O Driverless AI is an artificial intelligence (AI) platform for automatic machine learning. Driverless AI automates some of the most difficult and tedious data science and machine learning tasks such as feature engineering, algorithm selection, model validation, model tuning, model selection, model explanation, model documentation, and model deployment. It aims to achieve the highest predictive accuracy, comparable to expert data scientists, but in a much shorter time thanks to end-to-end automation. The current scope of Driverless AI does not include extensive data manipulation or augmentation before starting an experiment; hence most of the data preparation needs to be done before loading the data.</p>
<p>In Driverless AI, a pipeline (which we call an experiment) is made up of building blocks, or recipes, that produce a model. These recipes are Python code snippets. Recipes have the following types: ML algorithms, feature engineering (transformers), scorers, and configuration. In Driverless AI 1.7.0, we added support for BYOR (Bring Your Own Recipe). With BYOR, you can use your own recipes in combination with or instead of all built-in recipes. This allows you to influence the Driverless AI Automatic ML pipeline and gives you control over the optimization choices that Driverless AI makes.</p>
<p>Recipes can be uploaded into Driverless AI at runtime without having to restart Driverless AI, just like a plugin. There are approximately 150 open-source recipes that have been created by H2O and curated in the recipe library by data science experts that can be used as-is or as templates and expanded upon.</p>
<p>Existing recipes include templates for:</p>
<ul>
<li><strong>Transformers</strong></li>
<li><strong>Scorers</strong></li>
<li><strong>Models</strong></li>
<li><strong>Data</strong></li>
</ul>
<p>The various types of templates and how to use them will be described in the remaining tasks of the tutorial. Please note that the <strong>Data</strong> recipes will be covered in another tutorial.</p>
<h2>How do recipes work in Driverless AI?</h2>
<p>During the training of a supervised machine learning modeling pipeline, Driverless AI can use the recipes or code snippets as building blocks, independent or in combination with all built-in code pieces. The recipes act the same way as if it was written by H2O. It&#39;s the same python code and backend, so there is no performance penalty.</p>
<p>Below is a diagram of how recipes work in Driverless AI and how the Automatic Model Optimization process is extended:</p>
<p><img alt="dai-byor-how-it-works" src="img/19c0e46d6cf96f0d.jpg"></p>
<p>The image below is a deeper dive into the <strong>BYOR</strong> architecture for a multi-class problem:</p>
<p><img alt="dai-byor-architecture-diagram-1" src="img/eed8ff3f17393b90.jpg"></p>
<p>The diagram above focuses on the parts of Driverless AI that are relevant to the <strong>BYOR</strong> architecture. Automatic Visualization and Machine Learning Interpretability are not covered in this diagram. The diagram is the architecture representing a multi-class problem, but binary classification and regression problems are also supported.</p>
<h2>What is the role of recipes in ML?</h2>
<p><strong>BYOR</strong> allows data Scientists to bring their own recipes or leverage the existing open-source recipes to manipulate, augment, and optimize their data. In this way, the expertise of those creating and using the recipes is leveraged to focus on domain-specific functions to build customizations.</p>
<h2>Where can you find the H2O open-source recipes?</h2>
<p>The curated open-source recipes currently reside on the following GitHub repository:</p>
<p><a href="https://github.com/h2oai/driverlessai-recipes/tree/rel-1.8.4#sample-recipes" target="_blank">H2O Curated Recipes GitHub Repo </a></p>
<h2>Deeper Dive and Resources</h2>
<p>Explore the recipe Library and recipe recommendations</p>
<p>Best Practices for Recipes:</p>
<ul>
<li><a href="https://github.com/h2oai/driverlessai-recipes/tree/rel-1.8.4#security" target="_blank">Security</a></li>
<li><a href="https://github.com/h2oai/driverlessai-recipes/tree/rel-1.8.4#safety" target="_blank">Safety</a></li>
<li><a href="https://github.com/h2oai/driverlessai-recipes/tree/rel-1.8.4#performance" target="_blank">Performance</a></li>
<li><a href="https://github.com/h2oai/driverlessai-recipes/blob/rel-1.8.4/FAQ.md" target="_blank">Frequently Asked Questions</a></li>
</ul>


      </google-codelab-step>
    
      <google-codelab-step label="Task 2: Launch an Experiment and Consume a Recipe" duration="0">
        <h2>About the Dataset</h2>
<p>This tutorial will use the customer churn Telco dataset from <a href="https://www.kaggle.com/becksddf/churn-in-telecoms-dataset" target="_blank">Kaggle</a>. The dataset has information about customers of a Telecommunications company. Some of the features included are customer demographic location, length of the account, and customer call history. We will be predicting customer churn.</p>
<p>[1] <a href="https://www.kaggle.com/becksddf/churn-in-telecoms-dataset" target="_blank">Churn in Telcom&#39;s dataset</a></p>
<p>This dataset set has 3333 customers(rows) and 21 columns representing attributes of each customer&#39;s telephone plan.</p>
<h2>Add the Data</h2>
<p>1. Click on <strong>+ Add a Dataset(or Drag and Drop)</strong></p>
<p>2. Select <strong>FILE SYSTEM</strong></p>
<p><img alt="add-dataset-file-system" src="img/f859c47c8e7e31b2.jpg"></p>
<p>3. Enter the following <code>/data/Splunk/churn</code> into the search bar.</p>
<p>4. Select <code>churn.csv</code></p>
<p>5. <strong>Click to Import Selection</strong></p>
<p><img alt="import-churn-dataset" src="img/62fa994f6e21044b.jpg"></p>
<p>6.  If the file loaded successfully, then you should see an image similar to the one below:</p>
<p><img alt="churn-dataset-overview" src="img/f132a0557e081e8.jpg"></p>
<p><strong>Note:</strong> you can ignore the other datasets as they are used in other tutorials.</p>
<p>7. Let&#39;s take a quick look at the columns of the churn dataset:</p>
<p><img alt="customer-churn-detail-page" src="img/215f5fa3f94db7d9.jpg"></p>
<p><em>Things to Note:</em></p>
<ol type="1">
<li><strong>State</strong></li>
<li><strong>Account Length</strong> - in days</li>
<li><strong>Area Code</strong></li>
<li><strong>Phone</strong> - Phone Number</li>
<li><strong>Int&#39;l Plan</strong> - International Plan</li>
<li><strong>VMail Plan</strong> - Voicemail Plan</li>
<li><strong>VMail Messages</strong> - Number of voicemail Messages</li>
</ol>
<p>8. Continue scrolling the current page to see more columns (image is not included)</p>
<ol type="1">
<li><strong>Day Mins</strong>  - Total Day Minutes</li>
<li><strong>Day Calls</strong> - Total Day Calls</li>
<li><strong>Day Charge</strong> - Total Day Charge</li>
<li><strong>Eve Mins</strong> - Total Evening Minutes</li>
<li><strong>Eve Calls</strong> - Total Evening Call</li>
<li><strong>Eve Charge</strong> - Total Evening Charge</li>
<li><strong>Night Mins</strong> - Total Night Minutes<br></li>
<li><strong>Night Calls</strong> - Total Night Calls</li>
<li><strong>Night Charge</strong> - Total Night Charge</li>
<li><strong>Intl Mins</strong> - Total International Minutes</li>
<li><strong>Intl Calls</strong> - Total International Calls</li>
<li><strong>Intl Charge</strong> - Total International Charge<br></li>
<li><strong>CustServ Call</strong> - Total Customer Service Calls</li>
<li><strong>Churn</strong> - Did customer churn? True: customer churned, False: customer did not churn</li>
</ol>
<p>9.  Return to the <strong>Datasets</strong> Page</p>
<h2>Launch Experiment</h2>
<p>1. On the <strong>Datasets</strong> page click on the <code>churn.csv</code> dataset and select <strong>Predict</strong></p>
<p><img alt="churn-predict" src="img/5c19066441a388f1.jpg"></p>
<p>2.  Select <strong>Not Now</strong> on the <strong>First time Driverless AI, Click Yes to get a tour!</strong>. A similar image should appear:</p>
<p><img alt="churn-experiment" src="img/8cb0786339f1c084.jpg"></p>
<p>3. Select <strong>Target Column</strong>, then select <strong>Churn?</strong></p>
<p><img alt="select-churn" src="img/602dda83389cbcf8.jpg"></p>
<p>4. Name your experiment <code>Exp 1 - Baseline</code> and verify that the experiment looks similar to the one below, then select <strong>Launch Experiment</strong>:</p>
<p><strong>Note:</strong> You might have to update the default settings to the ones shown below.</p>
<p><img alt="exp1-settings" src="img/7c518e325e38c26e.jpg"></p>
<p>5. Once the experiment is completed, a similar page will appear with experiment results:</p>
<p><strong>Experiment 1 Results:</strong></p>
<p><img alt="exp1-summary" src="img/1e667610b7861da1.jpg"></p>
<p><strong>Experiment 1 - ROC Accuracy</strong></p>
<p><img alt="exp1-accuracy" src="img/9b18eb1c15c8a4b.jpg"></p>
<p><em>Things to Note:</em></p>
<ul>
<li><strong>Under summary</strong>: The validation score is 0.8992 with a best accuracy of 0.9472 (click on ROC then hover over Best ACC)</li>
<li><strong>Variable Importance</strong>: The top variable that led to a customer churning according to this model was the total amount a customer was being charged for their &#34;Day Charge.&#34; The other variable of most importance is the total amount the customer is being charged for their evening calls,  &#34;Eve calls.&#34; Intuitively this makes sense because if a customer is overpaying for calls in the morning when they might be the most active and also overpaying for their evening calls, it could have led a dissatisfied customer.</li>
</ul>
<h2>Deeper Dive and Resources</h2>
<ul>
<li><a href="https://www.kaggle.com/becksddf/churn-in-telecoms-dataset" target="_blank">Kaggle&#39;s Churn in Telcom&#39;s Dataset</a></li>
</ul>


      </google-codelab-step>
    
      <google-codelab-step label="Task 3: Recipe: Transformer" duration="0">
        <p>On task 2, we ran an experiment to build a model that would predict customer churn. The Driverless AI model that was generated with the settings shown below and gave us the results below:</p>
<p><strong>Summary of results</strong>:</p>
<table>
<tr></tr>
<tr><td colspan="1" rowspan="1"><p>-</p>
</td><td colspan="1" rowspan="1"><p>Experiment 1(Base)</p>
</td></tr>
<tr><td colspan="1" rowspan="1"><p>Experiment Settings</p>
</td><td colspan="1" rowspan="1"><p>5-4-10</p>
</td></tr>
<tr><td colspan="1" rowspan="1"><p>Scorer</p>
</td><td colspan="1" rowspan="1"><p>AUC</p>
</td></tr>
<tr><td colspan="1" rowspan="1"><p>Model</p>
</td><td colspan="1" rowspan="1"><p>XGBoostGBM</p>
</td></tr>
<tr><td colspan="1" rowspan="1"><p>Feature Importance</p>
</td><td colspan="1" rowspan="1"><p>Day Charge, and Eve Charge</p>
</td></tr>
<tr><td colspan="1" rowspan="1"><p>AUC Score</p>
</td><td colspan="1" rowspan="1"><p>0.8992</p>
</td></tr>
<tr><td colspan="1" rowspan="1"><p>Accuracy</p>
</td><td colspan="1" rowspan="1"><p>0.9472</p>
</td></tr>
</table>
<p>When a dataset is selected for an experiment, Driverless AI optimizes its settings by selecting the best Scorer, Model(s), and Transformers for the dataset. However, this does not mean we cannot import other scorers, models, or transformers to see if we can further optimize our model. In this task, we will be importing a transformer recipe, to see how the features in the feature engineering change.</p>
<p>Now we are going to import a recipe to add related numeric features such as day minutes, evening minutes, and night minutes. Driverless AI doesn&#39;t add three or more columns, so we will add a recipe that will do this for us. We will see if Driverless AI is able to use this new transformation in determining variable importance.</p>
<h2>Import a Transformer Recipe</h2>
<p>The goal of importing the new transformer recipe is to see if we can further optimize our baseline model. To do this, we are going to take our baseline experiment and import the <a href="https://github.com/h2oai/driverlessai-recipes/blob/rel-1.8.4/transformers/numeric/sum.py" target="_blank">sum.py transformer</a></p>
<p>1. Select <strong>Experiments</strong> located at the top of the <strong>Experiment</strong> page:</p>
<p><img alt="exp2-select-experiments" src="img/b187d81f021cfbb9.jpg"></p>
<p>2. Hover over <strong>Exp 1 - Baseline</strong>, then click on the three stacked small boxes located on the right side of <strong>Exp 1 - Baseline</strong> and select <strong>New Model with Same Params</strong>, this will create a new experiment with the same parameters that you used for <strong>Exp 1 - Baseline</strong>:</p>
<p><img alt="exp2-new-model-w-same-params" src="img/f3f02b505766d9a1.jpg"></p>
<p>3. Select <strong>No</strong> on the <strong>First Time Using Driverless AI Tour</strong></p>
<p>4. Select <strong>Expert Settings</strong></p>
<p><img alt="exp2-expert-settings" src="img/a267633bfe871035.jpg"></p>
<p>5. Click on <strong>+Load Custom Recipe From URL</strong></p>
<p><img alt="exp2-load-custom-recipe-transformer" src="img/e5807d689a06b9f8.jpg"></p>
<p>6. Copy and paste  the following URL for the SumTransformer into the <strong>Load Custom Recipe</strong> box then click on <strong>Save.</strong> Make sure no extra spaces are added after the link in the <strong>Load Custom Recipe</strong> box, as it might give you an error.</p>
<p><strong>Note:</strong> The Driverless AI Recipes branches rel-1.8.4 and rel-1.8.4.1 are the same, and have been merged into rel-1.8.4; that is why we are using the links for the 1.8.4 branch.</p>
<pre><code>https://github.com/h2oai/driverlessai-recipes/blob/rel-1.8.4/transformers/numeric/sum.py
</code></pre>
<p><img alt="exp2-load-custom-recipe-transformer-raw-url" src="img/481190f82bc77f80.jpg"></p>
<p>7. There will be a message updating you on the status of loading of the recipe; then Expert Experiment Settings page will re-appear</p>
<p>8. On the <strong>Expert Experiment Settings</strong> find <strong>Recipes</strong> and click on it</p>
<p><img alt="exp2-expert-settings-recipes" src="img/ff598a3573e29eef.jpg"></p>
<p>9. Click on <strong>Select Values</strong> under <strong>Include Specific Transformer</strong>, we are going to verify that the transformer we loaded did indeed load.</p>
<p><img alt="exp2-expert-settings-transformer-select-values" src="img/5eaa97444fc2c06b.jpg"></p>
<p>10. Type <code>SumTransformer</code> on the search bar, if the Transformer loaded correctly, then it will appear as shown below, highlighted, meaning that it will be used by Driverless AI. Make sure your <strong>SumTransformer</strong> is checked, and click <strong>Done</strong></p>
<p><img alt="exp2-sum-transformer" src="img/b64973c1ac07cdea.jpg"></p>
<p>11. Select <strong>Save</strong> on the <strong>Expert Experiment Settings</strong> page</p>
<p>12. Name your experiment <code>Exp 2 - Transformer.</code> Also, verify that the transformer is in the experiment; on the Experiments page, look under &#34;What do these settings mean?&#34; &gt; &#34;Interpretability&#34; and you should see the custom transformer as <strong>Sum.</strong></p>
<p><img alt="exp2-check-transformer" src="img/d541b14fbb5e6a48.jpg"></p>
<p>13. Select <strong>Launch Experiment</strong></p>
<p><img alt="exp2-summary" src="img/63b44afd38371fc2.jpg"></p>
<p>As you can see in the variable importance section, some features start with &#34;SUM;&#34; those are the features from the custom transformer. We can see that they are playing an important role in the new model. The AUC score improved, and the model is slightly better than the baseline model. We will further discuss the results at the end of task 6.</p>
<h2>Deeper Dive and Resources</h2>
<ul>
<li><a href="https://github.com/h2oai/driverlessai-recipes/blob/rel-1.8.4/transformers/numeric/sum.py" target="_blank">H2O&#39;s Driverless AI Recipes - Sum Transformer</a></li>
</ul>


      </google-codelab-step>
    
      <google-codelab-step label="Task 4: Recipe: Scorer" duration="0">
        <p>In this task, we will be importing a Scorer recipe to see if this scorer will help improve the performance of the model.</p>
<h2>Import a Scorer Recipe</h2>
<p>The model recipe that will be used for this experiment is the Brier Loss Scorer; to learn more about the Brier Loss model, see the <strong>Deeper Dive and Resources</strong> at the end of this task.</p>
<p>1. Select <strong>Experiments</strong> located at the top of the <strong>Experiment</strong> page</p>
<p>2. Hover over <strong>Exp 1 - Baseline</strong>, then click on the three stacked small boxes located on the right side of <strong>Exp 1 - Baseline</strong> and select <strong>New Model with Same Params</strong>, this will create a new experiment with the same parameters that you used for <strong>Exp 1 - Baseline</strong>:</p>
<p><img alt="exp3-new-model-w-same-params" src="img/ba707599ed516732.jpg"></p>
<p>3. Select <strong>Expert Settings</strong></p>
<p><img alt="exp2-expert-settings" src="img/a267633bfe871035.jpg"></p>
<p>4. Click on <strong>+Load Custom Recipe From URL</strong></p>
<p><img alt="exp3-load-custom-recipe-scorer" src="img/5905e349f625a21f.jpg"></p>
<p>5. Copy and paste  the following URL for the Custom Brier Loss recipe into the <strong>Load Custom Recipe</strong> box then click on <strong>Save</strong></p>
<pre><code>https://github.com/h2oai/driverlessai-recipes/blob/rel-1.8.4/scorers/classification/binary/brier_loss.py
</code></pre>
<p><img alt="exp3-load-custom-recipe-scorer-raw-url" src="img/b159b7952b2d416d.jpg"></p>
<p>6. There will be a message updating you on the status of loading of the recipe; then Expert Experiment Settings page will re-appear</p>
<p>7. On the <strong>Expert Experiment Settings</strong> find <strong>Recipes</strong> and click on it</p>
<p><img alt="exp2-expert-settings-recipes" src="img/ff598a3573e29eef.jpg"></p>
<p>8. Click on <strong>Select Value</strong> under <strong>Include Specific Scorers</strong>, we are going to verify that the scorer we loaded did indeed load.</p>
<p><img alt="exp3-expert-settings-scorer-select-values" src="img/6c5d987478676744.jpg"></p>
<p>9. On the list of Scores that comes up look for <code>BRIER</code>, if the Scorer loaded correctly, then it will appear as shown below, highlighted meaning that it will be used by Driverless AI:</p>
<p><img alt="exp3-brier-scorer" src="img/bc96c3257dfb8a8e.jpg"></p>
<p>10. Select <strong>Save</strong> on the <strong>Expert Experiment Settings</strong> page</p>
<p>11. Once back on the <strong>Experiment</strong> page, click on the Scorer setting which has <strong>AUC</strong> as seen on the image below:</p>
<p><img alt="exp3-scorer-update" src="img/3f8fb05746c6cc07.jpg"></p>
<p>12. Select the <strong>Brier</strong> Scorer by clicking on it:</p>
<p><img alt="exp3-select-brier" src="img/c500e40d61e7b091.jpg"></p>
<p>13. Name your experiment <code>Exp 3 - Scorer</code>, and now your experiment page should look similar to the one below with <strong>Brier</strong> as your new scorer. Since we selected to create a new experiment from the baseline experiment, this experiment does not have the transformer we loaded on task 2.</p>
<p><img alt="exp3-experiment-page-with-brier" src="img/5837f7927320448b.jpg"></p>
<p>14. Select Launch Experiment</p>
<p><img alt="exp3-summary" src="img/75ab0a408bdf62c4.jpg"></p>
<p><strong>Experiment 3 - ROC, Best Accuracy</strong></p>
<p><img alt="exp3-accuracy" src="img/10d2ac0da7a8f31f.jpg"></p>
<p>The ROC for this experiment was 0.9211, and the best accuracy was 0.9553.</p>
<h2>Deeper Dive and Resources</h2>
<ul>
<li><a href="https://en.wikipedia.org/wiki/Brier_score" target="_blank">Wikipedia Brier Score</a></li>
<li><a href="https://github.com/h2oai/driverlessai-recipes/blob/rel-1.8.4/scorers/classification/binary/brier_loss.py" target="_blank">H2O&#39;s Driverless AI Recipes - Brier Loss</a></li>
</ul>


      </google-codelab-step>
    
      <google-codelab-step label="Task 5: Recipe: Model" duration="0">
        <p>In this task, we will be importing a model recipe to see if this new custom model recipe will help improve our churn model.</p>
<h2>Import a Model Recipe</h2>
<p>The model recipe that will be used for this experiment is an <strong>ExtraTrees</strong>, which is an extremely randomized tree (ExtraTrees) from sklearn, to learn more about the <strong>Extra Trees</strong> model see the <strong>Deeper Dive and Resources</strong> at the end of this task.</p>
<p>1.Select <strong>Experiments</strong> located at the top of the <strong>Experiment</strong> page</p>
<p>2. Hover over <strong>Exp 1 - Baseline</strong>, then click on the three stacked small boxes located on the right side of <strong>Exp 1 - Baseline</strong> and select <strong>New Model with Same Params</strong>, this will create a new experiment with the same parameters that you used for <strong>Exp 1 - Baseline</strong>:</p>
<p><img alt="exp4-new-model-w-same-params" src="img/b6a894eaf017e88d.jpg"></p>
<p>3. Select <strong>Expert Settings</strong></p>
<p>4. Click on <strong>+Load Custom Recipe From URL</strong></p>
<p>5. Copy and paste  the following URL into the <strong>Load Custom Recipe</strong> box then click on <strong>Save</strong></p>
<pre><code>https://github.com/h2oai/driverlessai-recipes/blob/rel-1.8.4/models/algorithms/extra_trees.py
</code></pre>
<p><img alt="exp4-load-custom-recipe-model-raw-url" src="img/c6e959efd52f3fb8.jpg"></p>
<p>6. There will be a message updating you on the status of the recipe; then the <strong>Expert Experiment Settings</strong> page will re-appear</p>
<p>7. On the <strong>Expert Experiment Settings</strong> find <strong>Recipes</strong> and click on it</p>
<p>8. Click on <strong>Select Value</strong> under <strong>Include Specific Model</strong>, we are going to verify that the custom model we loaded did indeed load then we will only select the <strong>ExtraTress</strong> model to run on our new experiment:</p>
<p><img alt="exp4-expert-settings-model-select-values" src="img/87e6364ce1014683.jpg"></p>
<p>9. Click on <strong>Unselect all</strong>, then select the <strong>ExtraTreess</strong> model and click <strong>Done</strong></p>
<p><img alt="exp4-custom-extratrees-model" src="img/5aa9754794113965.jpg"></p>
<p>10. Select <strong>Save</strong> on the <strong>Expert Experiment Settings</strong> page</p>
<p>11. Name your experiment <code>Exp 4 - Model</code> and verify that the custom model was included on the experiment on the <strong>Experiments</strong> page by looking under &#34;What do these settings mean?&#34;, the settings have been updated to reflect the new ExtraTrees custom model:</p>
<p><img alt="exp4-w-extratrees-model" src="img/a36fdd2138bb044e.jpg"></p>
<p>12. Select Launch Experiment</p>
<p><img alt="exp4-summary" src="img/4a03ea3432758e1b.jpg"></p>
<p><strong>Experiment 3 - ROC, Best Accuracy</strong></p>
<p><img alt="exp4-accuracy" src="img/184420bfc4efb190.jpg"></p>
<p>The AUC for this experiment was 0.9082, and the best accuracy was 0.9439</p>
<h2>Deeper Dive and Resources</h2>
<ul>
<li><a href="https://github.com/h2oai/driverlessai-recipes/blob/rel-1.8.4/models/algorithms/extra_trees.py" target="_blank">H2O&#39;s Driverless AI Recipes - ExtraTrees Model </a></li>
</ul>


      </google-codelab-step>
    
      <google-codelab-step label="Task 6: Comparing Final Model Results" duration="0">
        <p>So far, we ran four experiments, a baseline, and the baseline with three different types of recipes:</p>
<ul>
<li>Driverless AI default settings</li>
<li>Transformer</li>
<li>Scorer</li>
<li>Model</li>
</ul>
<p>Now we are going to compare the results of all the experiments through the <strong>Projects</strong> feature which allows us to compare the final models for each experiment:</p>
<p>1. Click on <strong>Projects</strong></p>
<p><img alt="projects-select" src="img/24ee8ea67038baa5.jpg"></p>
<p>2. Select <strong>+New Project</strong></p>
<p>3. Enter the following under:</p>
<p><strong>Name</strong></p>
<pre><code>Customer Churn Recipe Comparison
</code></pre>
<p><strong>Description</strong></p>
<pre><code>Comparison of customer churn experiments using various recipes.
</code></pre>
<p>4. Select <strong>Create a New Project</strong></p>
<p><img alt="create-project" src="img/437f39e9f6301c64.jpg"></p>
<p>5. Click on <strong>+Link Experiment</strong></p>
<p><img alt="projects-link-experiment" src="img/fd99bcc6868e46c.jpg"></p>
<p>6. Select <strong>Exp 1 - Baseline</strong> by clicking on the Model</p>
<p><img alt="project-select-exp1" src="img/78dd4585bb5746fb.jpg"></p>
<p>7. Repeat step 6 for the remaining models (2, 3, and 4). The <strong>Project</strong> page should look similar to the one below:</p>
<p><img alt="projects-all-models-selected" src="img/e69ff530ff147012.jpg"></p>
<p>8. Select Exp 1, 3 and 4 to compare by clicking on the select box to the left of each model, and then on <strong>Compare 3 Items</strong>:</p>
<p><img alt="project-select-models-to-compare" src="img/5af3467deab48b17.jpg"></p>
<p>9. A similar page will appear with the three model results:</p>
<p><img alt="project-model-comparison1" src="img/9ab13d8135d1f7c1.jpg"></p>
<p>Confusion Matrices for each of the selected models</p>
<p><img alt="project-model-comparison-matrix" src="img/c512db96c310183b.jpg"></p>
<p>From the confusion matrices shown above, we can get an idea of how the models with the custom recipes improved. We can see that both, the Transformer and the Scorer recipes, yielded a lower misclassification error. However, since we were working with a slightly imbalanced dataset, we need to take a closer look at the confusion matrices. We see that by using the custom recipes, the models started predicting more <strong>False</strong> labels correctly, in other words, we see more <strong>True Negatives;</strong> thus, we have a smaller misclassification error for the <strong>False</strong> class. On the other hand, only the Scorer recipe helped our model to predict more <strong>True</strong> labels correctly because, for the Transformer recipe, it was the opposite. The Scorer recipe helped the model to get more <strong>True Positives</strong> than the baseline model, but the Transformer recipe got less <strong>True Positives</strong> than the baseline model.  For that reason, we see that the misclassification error for the True label only improved for the model with the Scorer recipe.</p>
<p>ROC Curves for each model selected:</p>
<p><img alt="project-model-comparison2" src="img/105ded854fe8785c.jpg"></p>
<p>We can see that when we used the Scorer recipe, the model had better AUC with an accuracy of 0.9553 compared to Exp 1 - Baseline, which had an accuracy of 0.9472. Even with Exp 2 - Transformer, the AUC also improved, and there was a small improvement in the accuracy. Also, when looking at the variables of importance, we see a slight variation on the variables that were selected to have the largest contribution to customers churning. In Exp 1 - Baseline, the variables with most importance when it came to customers churning were &#34;Day Charge,&#34; and &#34;Eve Charge.&#34; Exp 2, where we used the Transformer to sum columns with similar numerical data, we have the most important variable &#34;CustServ Calls&#34; and the &#34;sum of CustServ Calls, Day Mins, Eve Charge, Eve Mins, Intl Calls, Intl Charge, Intl Mins, Night Mins, and Vmail Message.&#34;</p>
<h2>Deeper Dive and Resources</h2>
<ul>
<li><a href="http://docs.h2o.ai/driverless-ai/latest-stable/docs/userguide/projects.html?highlight=project" target="_blank">H2O&#39;s Project Workspace</a></li>
</ul>


      </google-codelab-step>
    
      <google-codelab-step label="Appendix A: How to Access Driverless AI Custom Recipes" duration="0">
        <p>H2O custom recipes reside in the H2O Driverless AI Recipes GitHub repo. <strong>There are multiple branches of Driverless AI recipes so make sure that you are using the same branch as the Driverless AI version you have.</strong></p>
<p>For this tutorial, we are using <strong>Driverless AI 1.8.4.1,</strong> but we will be working off the Driverless AI 1.8.4 branch, as both 1.8.4 and 1.8.4.1 branches have been merged.</p>
<p>1. Open the link below on a separate tab. Make sure the branch is <strong>rel-1.8.4</strong></p>
<ul>
<li><a href="https://github.com/h2oai/driverlessai-recipes/tree/rel-1.8.4" target="_blank">H2O Driverless AI Recipes GitHub Repo</a></li>
</ul>
<p>The rel-1.8.4 branch will similar to the page below:</p>
<p><img alt="dai-recipes-github-page" src="img/adaae44d90533dbf.jpg"></p>
<p>2. Recipes can be uploaded to Driverless AI by:</p>
<ul>
<li>Uploading custom recipes from your local machine</li>
<li>Loading custom recipes from URL by copying and pasting the raw URL, as shown in this tutorial.</li>
<li>Going to the official recipes (external) repo and search for the recipe that you need.</li>
</ul>
<p><img alt="upload-recipes" src="img/f83569bdaf60e061.jpg"></p>
<h2>Uploading Recipes via URL</h2>
<p>We are going to get the URL for <strong>Brier Loss</strong> Scorer we used in Task 4 and upload it to Driverless AI.</p>
<p>1. Select the folder titled <strong>scorer</strong></p>
<p><img alt="dai-scorers-folder" src="img/e8ace7a3e3aa8edb.jpg"></p>
<p>2. Select the folder titled <strong>classification</strong> then the folder titled <strong>binary</strong></p>
<p><img alt="dai-classification-folder" src="img/ef20faf14f7fcfdf.jpg"></p>
<p>3. Click on the <strong>brier_loss.py</strong> file</p>
<p><img alt="dai-brier-loss-file" src="img/d43d02a72c191002.jpg"></p>
<p>4. Copy the URL located at the top of the page</p>
<p><img alt="dai-brier-loss-url" src="img/dab172a976b6b185.jpg"></p>
<p>5. The URL for this version of the recipe should be the one below. This URL is then pasted into Driverless AI.</p>
<pre><code>https://github.com/h2oai/driverlessai-recipes/blob/rel-1.8.4/scorers/classification/binary/brier_loss.py
</code></pre>
<p>6. See task 4 of this tutorial to follow the process of uploading a recipe via the raw URL</p>
<h2>Uploading Recipes from Local Machine</h2>
<p>For this tutorial, we are using <strong>Driverless AI 1.8.4.1,</strong> but we will be working off the Driverless AI 1.8.4 branch, as both, 1.8.4 and 1.8.4.1 branches have been merged.</p>
<p>1. Open the link below on a separate tab. Make sure the branch is <strong>rel-1.8.4</strong></p>
<ul>
<li><a href="https://github.com/h2oai/driverlessai-recipes/tree/rel-1.8.4" target="_blank">H2O Driverless AI Recipes GitHub Repo</a></li>
</ul>
<p>2. Make sure it is Branch rel-1.8.4, then click on <strong>Clone or Download</strong>, then on <strong>Download ZIP</strong>. This will download the entire rel-1.8.4 repo to your desktop. If you prefer not to download the entire repo, then use the URL method.</p>
<p><img alt="dai-recipes-repo-download" src="img/553384888ef148d6.jpg"></p>
<p>3. Unzip the driverless-recipes-rel-1.8.4 file and save it on your local machine, your directory of choice.</p>
<p>4. On Driverless AI, start an Experiment, then select Expert Settings. Now instead of selecting <strong>+Load Custom Recipe From URL</strong>, you will select <strong>+Upload Custom Recipe</strong></p>
<p><img alt="dai-upload-custom-recipe" src="img/89489a9530ed727b.jpg"></p>
<p>5. After you click on <strong>Upload Custom Recipe</strong>, go to the directory where you saved the <strong>driverlessai-recipes-rel-1.8.4</strong> folder</p>
<p>6. Select the <strong>scorer</strong> folder</p>
<p><img alt="dai-recipe-repo-scorers-folder" src="img/15e8cdfd465f229a.jpg"></p>
<p>7. Select the <strong>classification</strong> folder, then the <strong>binary</strong> folder</p>
<p><img alt="dai-recipe-repo-classification-folder" src="img/936a9329e71ad4de.jpg"></p>
<p>8. After, select the <strong>brier_loss.py</strong> file and then <strong>Open</strong></p>
<p><img alt="dai-recipe-repo-brier-loss-file" src="img/f386f5c4a84667a8.jpg"></p>
<p>9. After doing this last step, you can continue with the rest of the steps on task 4 of this tutorial.</p>


      </google-codelab-step>
    
      <google-codelab-step label="Next Steps" duration="0">
        <p>Check out Driverless AI next tutorial <a href="https://h2oai.github.io/tutorials/build-your-own-custom-recipe-tutorial/#0" target="_blank">Develop Your Own Custom Recipe Tutorial</a></p>
<p>Where you will learn to build:</p>
<ul>
<li>Custom Transformer Recipe</li>
<li>Custom Scorer Recipe</li>
<li>Custom Model Recipe</li>
</ul>
<p>Webinar: <a href="https://www.brighttalk.com/webcast/16463/360533" target="_blank">Extending the H2O Driverless AI Platform with Your Recipes by H2O&#39;s Arno Candel</a></p>
<p>Blog: <a href="https://www.h2o.ai/blog/custom-machine-learning-recipes-the-ingredients-for-success/" target="_blank">Custom Machine Learning Recipes: The ingredients for success by H2O&#39;s Parul Pandey</a></p>
<p>Catalog: <a href="http://catalog.h2o.ai/" target="_blank">Existing Open Source Custom Recipes</a></p>


      </google-codelab-step>
    
  </google-codelab>

  <script src="../assets/codelab-elements/native-shim.js"></script>
  <script src="../assets/codelab-elements/custom-elements.min.js"></script>
  <script src="../assets/codelab-elements/prettify.js"></script>
  <script src="../assets/codelab-elements/codelab-elements.js"></script>

</body>
</html>
